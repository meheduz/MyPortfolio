(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1189:function(e,t,s){Promise.resolve().then(s.bind(s,5804))},5804:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminPage}});var a=s(7437),n=s(2265),l=s(1396),o=s.n(l);function AdminPage(){let[e,t]=(0,n.useState)(!1),[s,l]=(0,n.useState)(""),[i,r]=(0,n.useState)([]),[c,d]=(0,n.useState)(null),[u,m]=(0,n.useState)({title:"",content:"",category:"Personal",excerpt:""});(0,n.useEffect)(()=>{let e=sessionStorage.getItem("adminAuth");if("true"===e){t(!0);let e=JSON.parse(localStorage.getItem("blogPosts")||"[]");r(e)}},[]);let handleSubmit=async e=>{e.preventDefault();let t={id:Date.now(),...u,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),readTime:Math.ceil(u.content.split(" ").length/200)+" min read"};try{let e=JSON.parse(localStorage.getItem("blogPosts")||"[]"),s=[t,...e];localStorage.setItem("blogPosts",JSON.stringify(s));let a=new URLSearchParams;if(a.append("form-name","blog-posts"),a.append("post-data",JSON.stringify(t)),await fetch("/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a.toString()}),c){let e=i.map(e=>e.id===c.id?{...t,id:c.id}:e);r(e),localStorage.setItem("blogPosts",JSON.stringify(e)),d(null),alert("Post updated successfully!")}else r([t,...i]),alert("Post published successfully!");m({title:"",content:"",category:"Personal",excerpt:""}),setTimeout(()=>{window.location.href="/blog"},1e3)}catch(e){alert("Error publishing post. Please try again.")}};return e?(0,a.jsxs)("div",{className:"admin-page",children:[(0,a.jsx)("nav",{className:"navbar",children:(0,a.jsxs)("div",{className:"nav-container",children:[(0,a.jsx)(o(),{href:"/",className:"nav-logo",children:"Meheduz"}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o(),{href:"/blog",className:"back-home",children:"← Back to Blog"}),(0,a.jsx)("button",{onClick:()=>{t(!1),sessionStorage.removeItem("adminAuth")},className:"logout-btn",children:"Logout"})]})]})}),(0,a.jsx)("main",{className:"admin-main",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("h1",{children:c?"Edit Post":"Write New Post"}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"post-form",name:"blog-posts",method:"POST","data-netlify":"true",children:[(0,a.jsx)("input",{type:"hidden",name:"form-name",value:"blog-posts"}),(0,a.jsx)("input",{type:"text",placeholder:"Post title...",value:u.title,onChange:e=>m({...u,title:e.target.value}),required:!0}),(0,a.jsxs)("select",{value:u.category,onChange:e=>m({...u,category:e.target.value}),children:[(0,a.jsx)("option",{value:"Personal",children:"Personal"}),(0,a.jsx)("option",{value:"Programming",children:"Programming"}),(0,a.jsx)("option",{value:"Robotics",children:"Robotics"}),(0,a.jsx)("option",{value:"Tech",children:"Tech"})]}),(0,a.jsx)("textarea",{placeholder:"Write a brief excerpt...",value:u.excerpt,onChange:e=>m({...u,excerpt:e.target.value}),rows:2,required:!0}),(0,a.jsx)("textarea",{placeholder:"What's on your mind?",value:u.content,onChange:e=>m({...u,content:e.target.value}),rows:8,required:!0}),(0,a.jsxs)("div",{className:"form-buttons",children:[(0,a.jsx)("button",{type:"submit",className:"publish-btn",children:c?"Update Post":"Publish Post"}),c&&(0,a.jsx)("button",{type:"button",onClick:()=>{d(null),m({title:"",content:"",category:"Personal",excerpt:""})},className:"cancel-btn",children:"Cancel"})]})]}),(0,a.jsxs)("div",{className:"recent-posts",children:[(0,a.jsx)("h2",{children:"Recent Posts"}),i.map(e=>(0,a.jsxs)("div",{className:"admin-post",children:[(0,a.jsx)("h3",{children:e.title}),(0,a.jsx)("p",{children:e.excerpt}),(0,a.jsxs)("small",{children:[e.date," • ",e.category]}),(0,a.jsxs)("div",{className:"post-actions",children:[(0,a.jsx)("button",{onClick:()=>{d(e),m({title:e.title,content:e.content||e.excerpt,category:e.category,excerpt:e.excerpt})},className:"edit-btn",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>{if(confirm("Delete this post?")){let t=i.filter(t=>t.id!==e.id);r(t),localStorage.setItem("blogPosts",JSON.stringify(t))}},className:"delete-btn",children:"Delete"})]})]},e.id))]})]})})]}):(0,a.jsx)("div",{className:"admin-page",children:(0,a.jsxs)("div",{className:"login-container",children:[(0,a.jsx)("h1",{children:"Admin Login"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"meheduz2025"===s?(t(!0),sessionStorage.setItem("adminAuth","true"),l("")):alert("Wrong password!")},className:"login-form",children:[(0,a.jsx)("input",{type:"password",placeholder:"Enter admin password",value:s,onChange:e=>l(e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",className:"login-btn",children:"Login"})]})]})})}}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=1189)}),_N_E=e.O()}]);